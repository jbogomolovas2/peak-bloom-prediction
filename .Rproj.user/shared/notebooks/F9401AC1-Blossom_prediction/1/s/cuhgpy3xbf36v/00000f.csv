"0","final_wide <- as_tibble(final_wide)"
"0","location_mapping <- c("
"0","  ""Kyoto, Japan""                = ""kyoto"","
"0","  ""Liestal-Weideli, Switzerland"" = ""liestal"","
"0","  ""New York, USA""               = ""newyorkcity"","
"0","  ""Vancouver, Canada""           = ""vancouver"","
"0","  ""Washington DC, USA""          = ""washingtondc"""
"0",")"
"0","final_wide$location_mapped <- location_mapping[final_wide$location]"
"0",""
"0","final_wide <- merge("
"0","  final_wide,"
"0","  combined_blossom_dates[, c(""location"", ""year"", ""bloom_doy"")],"
"0","  by.x = c(""location_mapped"", ""cherry_year""),"
"0","  by.y = c(""location"", ""year""),"
"0","  all.x = TRUE"
"0",")"
"0",""
"0","# Reorder columns"
"0","keep_vars <- c(""cherry_year"", ""location"", ""bloom_doy"")"
"0","other_vars <- setdiff(names(final_wide), c(keep_vars, ""location_mapped""))"
"0","final_wide <- final_wide[, c(keep_vars, other_vars)]"
"0",""
